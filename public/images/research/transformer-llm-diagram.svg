<svg viewBox="0 0 800 1000" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <path d="M0,0 L0,6 L9,3 z" fill="#333" />
    </marker>
    <linearGradient id="grad-input" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#fce4ec;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#f8bbd0;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="grad-layer" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#e3f2fd;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#bbdefb;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="grad-attn" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#fff3e0;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#ffe0b2;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="grad-ffn" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#e8f5e9;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#c8e6c9;stop-opacity:1" />
    </linearGradient>
  </defs>

  <rect width="100%" height="100%" fill="#ffffff" />

  <text x="200" y="50" font-family="Arial, sans-serif" font-size="24" font-weight="bold" text-anchor="middle" fill="#333">Encoder</text>
  <text x="600" y="50" font-family="Arial, sans-serif" font-size="24" font-weight="bold" text-anchor="middle" fill="#333">Decoder</text>

  <rect x="50" y="80" width="300" height="750" rx="10" ry="10" fill="none" stroke="#90a4ae" stroke-width="2" stroke-dasharray="5,5" />
  <text x="360" y="450" font-family="Arial, sans-serif" font-size="20" fill="#78909c" transform="rotate(-90 360,450)">Nx</text>

  <rect x="100" y="850" width="200" height="50" rx="5" ry="5" fill="url(#grad-input)" stroke="#f48fb1" stroke-width="2" />
  <text x="200" y="880" font-family="Arial, sans-serif" font-size="16" text-anchor="middle">Input Embedding</text>

  <circle cx="200" cy="780" r="20" fill="none" stroke="#333" stroke-width="2" />
  <text x="200" y="785" font-family="Arial, sans-serif" font-size="20" text-anchor="middle">+</text>
  <text x="280" y="785" font-family="Arial, sans-serif" font-size="14">Positional Encoding</text>

  <rect x="100" y="600" width="200" height="60" rx="5" ry="5" fill="url(#grad-attn)" stroke="#ffb74d" stroke-width="2" />
  <text x="200" y="635" font-family="Arial, sans-serif" font-size="16" text-anchor="middle">Multi-Head Attention</text>

  <rect x="100" y="540" width="200" height="40" rx="5" ry="5" fill="#fff9c4" stroke="#fbc02d" stroke-width="2" />
  <text x="200" y="565" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">Add &amp; Norm</text>

  <rect x="100" y="440" width="200" height="60" rx="5" ry="5" fill="url(#grad-ffn)" stroke="#81c784" stroke-width="2" />
  <text x="200" y="475" font-family="Arial, sans-serif" font-size="16" text-anchor="middle">Feed Forward</text>

  <rect x="100" y="380" width="200" height="40" rx="5" ry="5" fill="#fff9c4" stroke="#fbc02d" stroke-width="2" />
  <text x="200" y="405" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">Add &amp; Norm</text>

  <line x1="200" y1="920" x2="200" y2="900" stroke="#333" stroke-width="2" marker-end="url(#arrow)" />
  <line x1="200" y1="850" x2="200" y2="800" stroke="#333" stroke-width="2" marker-end="url(#arrow)" />
  <line x1="200" y1="760" x2="200" y2="660" stroke="#333" stroke-width="2" marker-end="url(#arrow)" />
  <line x1="200" y1="600" x2="200" y2="580" stroke="#333" stroke-width="2" marker-end="url(#arrow)" />
  <line x1="200" y1="540" x2="200" y2="500" stroke="#333" stroke-width="2" marker-end="url(#arrow)" />
  <line x1="200" y1="440" x2="200" y2="420" stroke="#333" stroke-width="2" marker-end="url(#arrow)" />
  <path d="M200,740 L80,740 L80,560 L100,560" fill="none" stroke="#333" stroke-width="1.5" stroke-dasharray="4,2" marker-end="url(#arrow)" />
  <path d="M200,520 L80,520 L80,400 L100,400" fill="none" stroke="#333" stroke-width="1.5" stroke-dasharray="4,2" marker-end="url(#arrow)" />

  <rect x="450" y="80" width="300" height="750" rx="10" ry="10" fill="none" stroke="#90a4ae" stroke-width="2" stroke-dasharray="5,5" />
  <text x="760" y="450" font-family="Arial, sans-serif" font-size="20" fill="#78909c" transform="rotate(-90 760,450)">Nx</text>

  <rect x="500" y="850" width="200" height="50" rx="5" ry="5" fill="url(#grad-input)" stroke="#f48fb1" stroke-width="2" />
  <text x="600" y="880" font-family="Arial, sans-serif" font-size="16" text-anchor="middle">Output Embedding</text>

  <circle cx="600" cy="780" r="20" fill="none" stroke="#333" stroke-width="2" />
  <text x="600" y="785" font-family="Arial, sans-serif" font-size="20" text-anchor="middle">+</text>

  <rect x="500" y="680" width="200" height="60" rx="5" ry="5" fill="url(#grad-attn)" stroke="#ffb74d" stroke-width="2" />
  <text x="600" y="705" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">Masked Multi-Head</text>
  <text x="600" y="725" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">Attention</text>

  <rect x="500" y="620" width="200" height="40" rx="5" ry="5" fill="#fff9c4" stroke="#fbc02d" stroke-width="2" />
  <text x="600" y="645" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">Add &amp; Norm</text>

  <rect x="500" y="540" width="200" height="60" rx="5" ry="5" fill="url(#grad-attn)" stroke="#ffb74d" stroke-width="2" />
  <text x="600" y="575" font-family="Arial, sans-serif" font-size="16" text-anchor="middle">Multi-Head Attention</text>

  <rect x="500" y="480" width="200" height="40" rx="5" ry="5" fill="#fff9c4" stroke="#fbc02d" stroke-width="2" />
  <text x="600" y="505" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">Add &amp; Norm</text>

  <rect x="500" y="400" width="200" height="60" rx="5" ry="5" fill="url(#grad-ffn)" stroke="#81c784" stroke-width="2" />
  <text x="600" y="435" font-family="Arial, sans-serif" font-size="16" text-anchor="middle">Feed Forward</text>

  <rect x="500" y="340" width="200" height="40" rx="5" ry="5" fill="#fff9c4" stroke="#fbc02d" stroke-width="2" />
  <text x="600" y="365" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">Add &amp; Norm</text>
  
  <rect x="500" y="260" width="200" height="40" rx="5" ry="5" fill="#e0f7fa" stroke="#4dd0e1" stroke-width="2" />
  <text x="600" y="285" font-family="Arial, sans-serif" font-size="16" text-anchor="middle">Linear</text>
  
  <rect x="500" y="190" width="200" height="40" rx="5" ry="5" fill="#e8f5e9" stroke="#66bb6a" stroke-width="2" />
  <text x="600" y="215" font-family="Arial, sans-serif" font-size="16" text-anchor="middle">Softmax</text>

  <line x1="600" y1="920" x2="600" y2="900" stroke="#333" stroke-width="2" marker-end="url(#arrow)" />
  <line x1="600" y1="850" x2="600" y2="800" stroke="#333" stroke-width="2" marker-end="url(#arrow)" />
  <line x1="600" y1="760" x2="600" y2="740" stroke="#333" stroke-width="2" marker-end="url(#arrow)" />
  <line x1="600" y1="680" x2="600" y2="660" stroke="#333" stroke-width="2" marker-end="url(#arrow)" />
  <line x1="600" y1="620" x2="600" y2="600" stroke="#333" stroke-width="2" marker-end="url(#arrow)" />
  <line x1="600" y1="540" x2="600" y2="520" stroke="#333" stroke-width="2" marker-end="url(#arrow)" />
  <line x1="600" y1="480" x2="600" y2="460" stroke="#333" stroke-width="2" marker-end="url(#arrow)" />
  <line x1="600" y1="400" x2="600" y2="380" stroke="#333" stroke-width="2" marker-end="url(#arrow)" />
  <line x1="600" y1="340" x2="600" y2="300" stroke="#333" stroke-width="2" marker-end="url(#arrow)" />
  <line x1="600" y1="260" x2="600" y2="230" stroke="#333" stroke-width="2" marker-end="url(#arrow)" />
  <line x1="600" y1="190" x2="600" y2="160" stroke="#333" stroke-width="2" marker-end="url(#arrow)" />
  <path d="M200,380 L200,320 L550,320 L550,540" fill="none" stroke="#333" stroke-width="2" stroke-dasharray="2,2" marker-end="url(#arrow)" />
  <path d="M200,380 L200,320 L650,320 L650,540" fill="none" stroke="#333" stroke-width="2" stroke-dasharray="2,2" marker-end="url(#arrow)" />

  <text x="200" y="940" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle">Inputs</text>
  <text x="600" y="940" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle">Outputs</text>
  <text x="600" y="960" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">(shifted right)</text>
  <text x="600" y="150" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle">Output Probabilities</text>

</svg>
